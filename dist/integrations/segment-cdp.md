# Segment CDP

> Expert patterns for Segment Customer Data Platform including Analytics.js,
server-side tracking, tracking plans with Protocols, identity resolution,
destinations configuration, and data governance best practices.


**Category:** integrations | **Version:** 1.0.0

**Tags:** segment, cdp, analytics, tracking, data-pipeline, customer-data

---

## Patterns

### Analytics.js Browser Integration
Client-side tracking with Analytics.js. Include track, identify, page,
and group calls. Anonymous ID persists until identify merges with user.


### Server-Side Tracking with Node.js
High-performance server-side tracking using @segment/analytics-node.
Non-blocking with internal batching. Essential for backend events,
webhooks, and sensitive data.


### Tracking Plan Design
Design event schemas using Object + Action naming convention.
Define required properties, types, and validation rules.
Connect to Protocols for enforcement.


### Identity Resolution
Track anonymous users, then merge with identified users via identify().
Use alias() for identity merging between systems. Group users into
companies/organizations.


### Destinations Configuration
Route data to analytics tools, data warehouses, and marketing platforms.
Use device-mode for client-side tools, cloud-mode for server processing.


### HTTP Tracking API
Direct HTTP API for any environment. Useful for edge functions,
workers, and non-Node.js backends. Batch up to 500KB per request.



## Anti-Patterns

### Dynamic Event Names
Event names with dynamic values pollute tracking

### Tracking Properties as Events
Properties should be values, not separate events

### Missing Identify Before Track
Track calls without prior identify lose user context

### PII in Properties Without Controls
Sending PII to all destinations violates privacy


## Sharp Edges (Gotchas)

*Real production issues that cause outages and bugs.*

### [MEDIUM] undefined

---

### [HIGH] undefined

---

### [MEDIUM] undefined

---

### [HIGH] undefined

---

### [LOW] undefined

---

### [MEDIUM] undefined

---

### [MEDIUM] undefined

---

### [HIGH] undefined

---

## Collaboration

### When to Hand Off

| Trigger | Delegate To | Context |
|---------|-------------|--------|
| `user needs A/B testing` | analytics-specialist | Segment + LaunchDarkly/Optimizely integration |
| `user needs data warehouse` | data-engineer | Segment to BigQuery/Snowflake/Redshift |
| `user needs customer support integration` | zendesk-integration | Identify calls syncing to support tools |
| `user needs marketing automation` | hubspot-integration | Segment to HubSpot destination |
| `user needs consent management` | privacy-specialist | GDPR/CCPA compliance with Segment |

---

## Get the Full Version

This skill has **automated validations**, **detection patterns**, and **structured handoff triggers** that work with the Spawner orchestrator.

```bash
npx vibeship-spawner-skills install
```

Full skill path: `~/.spawner/skills/integrations/segment-cdp/`

**Includes:**
- `skill.yaml` - Structured skill definition
- `sharp-edges.yaml` - Machine-parseable gotchas with detection patterns
- `validations.yaml` - Automated code checks
- `collaboration.yaml` - Handoff triggers for skill orchestration

---

*Generated by [VibeShip Spawner](https://github.com/vibeforge1111/vibeship-spawner-skills)*
